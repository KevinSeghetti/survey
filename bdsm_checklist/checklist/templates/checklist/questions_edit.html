{% extends "checklist/base.html" %}
{% block content %}

{% load staticfiles %}

<div class ="headline">Question list</div>

<div id="container">
      <div class="question-list">
        Loading...
      </div>

    <div class="question-create">
        <b>Add a Question</b>
      <div class ='row'>
        <div class ='form-group'>
            <div class=" col-md-1 col-xs-12">
              <label for="question_{{index}}_text" >Question:</label>
            </div>
            <div class=" col-md-3 col-xs-12">
              <input type="text" id="question_text" name="text"   class="text form-control"    >
          </div>
            <div class=" col-md-1 col-xs-12">
              <label  for="question_{{index}}_text" >Detail:</label>
            </div>
            <div class=" col-md-5 col-xs-12">
              <input type="text" id="question_detail" name="detail" class="detail form-control" >
            </div>
            <div class=" col-md-2 col-xs-12">
                <button class="create btn ">Create Question</button>
            </div>
        </div>
      </div>
    </div>

      <div class ='row'>
        <div class ='form-group'>
            <div class=" col-md-2 col-xs-12">
                <button class="btn page_first">First Page</button>
            </div>
            <div class=" col-md-2 col-xs-12">
                <button class="btn page_prev">Prev Page</button>
            </div>
            <div class=" col-md-2 col-xs-12">
                <button class="btn page_next">Next Page</button>
            </div>
            <div class=" col-md-2 col-xs-12">
                <button class="btn page_last">Last Page</button>
            </div>
        </div>
      </div>


</div>

<script>

    console.log("question_edit: start")

    $(document).ready(function() {
        console.log("question_edit: document ready")
        //var brandNewQuestion = new QuestionModel({ question_text: 'sample question', question_detail: 'sample question detail' });
        //brandNewQuestion.save();

        var assetList =
        [
            { url: '{% static "checklist/handlebar/question_edit.handlebar" %}' , loadHandler: templateLoaderFunction, name: 'question_edit' },
        ]
        Handlebars.templates = Handlebars.templates || {};

        chainLoadAssets(assetList, function()
        {
            var questionList = new QuestionCollection();
            var muppetsView = new QuestionListView({collection: questionList});
            questionList.fetch();

            //var appView = new QuestionCollectionView({model: QuestionModel});

            //var questions = new QuestionCollection()
            //
            //questions.on('change', function(msg) {
            //    console.log("questions loaded",questions)
            //}
            //)
            //
            //questions.on('change:question_detail', function(msg) {
            //    console.log("questions loaded",questions)
            //}
            //)

            //console.log("about to fetch question")
            //question.fetch({
            //    success: function (questionsResults) {
            //        console.log("question loaded")
            //        console.log(JSON.stringify(question));
            //        console.log("questionview construction")
            //        var appView = new QuestionView({model: question});




            //    }
            //})

        })


    })

</script>


{% endblock %}


